\begin{figure}[t]
\begin{algorithm}[H]
    \caption{\label{alg.backbone} The backbone protocol}
    \begin{algorithmic}[1]
     \Statex
     \Let\chain\varepsilon
        \Let{st}\varepsilon
        \Let{round}1
        \While{\textsc{True}}
            \Let{\tilde\chain}{\mathsf{maxvalid}( \chain, \mbox{any chain $\chain'$ found in  \textsc{Receive}()}) }
            \If{$\textsc{Input}()\mbox{ contains }\textsc{Read}$}
		        \State{ {\bf write} $R(\chain)$ to \textsc{Output}()}
            \EndIf
            \Let{\langle st, x\rangle}{I(st,\tilde\chain, round,  \textsc{Input}(), \textsc{Receive}())}
            \Let{\chain_\mathsf{new}}{\Call{\sf pow}{x, \tilde\chain}}
            \If{$\chain\ne\chain_\mathsf{new}$}
                \Let{\chain}{ \chain_\mathsf{new}}
                \State\textsc{Diffuse}{$(broadcast)$}
            \Else
                \State\textsc{Diffuse}{$(\bot)$}
            \EndIf
            \Let{round}{round+1}
        \EndWhile
        \vskip2pt
    \end{algorithmic}
\end{algorithm}
\end{figure}
